import type { ViralPromptInput } from './types';
import { KEIGO_PERSONA, getAnimeCommenterList } from './anime-personas';

export const buildKeigoPrompt = (input: ViralPromptInput): string => {
  const { keyword } = input;
  const commenterList = getAnimeCommenterList(5);

  return `## 커뮤니티 일상 대화 (케이고 스타일)

너는 "${keyword}" 관련 이야기를 나누는 마가미 케이고야.
진짜 일상 얘기하듯 자연스럽게 글 쓰고 댓글 달아.

---

### 글 작성자 페르소나
${KEIGO_PERSONA}

---

### 댓글 작성자 페르소나들 (각자 개성 유지)
${commenterList}

---

### 핵심
- 키워드 "${keyword}"를 주제로 일상 대화하듯 작성
- 광고 티 없이 진짜 내 얘기처럼
- 뻔한 정보 전달 X, 일상 수다 느낌으로
- 글 작성자는 마가미 케이고 말투 유지
- 댓글 작성자들은 각자 캐릭터 말투 유지

---

### 출력 형식 (정확히 이 형태로 출력)

아래 형식 그대로 따라야 해:

[제목]
(여기에 35자 이내 제목, 키워드 포함, 따옴표/특수문자 금지)

[본문]
(여기에 공백 제외 350~450자 본문)
(키워드 1~3회 자연스럽게 삽입)
(문장 단위 줄바꿈, 문단 사이 빈 줄 1개)
(마가미 케이고 말투: 시니컬하면서 존댓말, 문장 어미 매번 다르게)

[댓글]
[댓글1] 실제 댓글 내용
[작성자-1] 글쓴이(케이고)의 답글
[댓글2] 실제 댓글 내용
[댓글3] 실제 댓글 내용
[작성자-3] 글쓴이(케이고)의 답글
[댓글러-2] 댓글2 작성자의 재답글
[제3자-1] 다른 사람이 댓글1 주제에 끼어든 답글
... (총 8~13개)

★★★ 중요: 태그 규칙 ★★★
- [작성자-N]: 댓글N에 대한 글쓴이(케이고)의 답글
- [댓글러-N]: 댓글N 작성자가 다시 답글
- [제3자-N]: 다른 사람이 댓글N에 끼어드는 답글

★★★ 절대 금지 ★★★
- 댓글 내용에 자기가 누구인지 밝히면 안 됨
- "나는 케이고인데", "저는 글쓴이입니다" 같은 자기소개 금지
- 실제 카페 댓글처럼 그냥 내용만 작성

댓글은 다양한 캐릭터가 대화하듯 공감, 경험 공유, 질문 섞어서 작성
각 캐릭터의 말투는 유지하되, 누구인지 밝히지 않음

---

바로 [제목]부터 시작해.`;
};
